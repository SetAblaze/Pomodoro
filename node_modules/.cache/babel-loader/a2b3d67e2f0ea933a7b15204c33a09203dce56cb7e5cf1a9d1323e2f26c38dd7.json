{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khalo\\\\Desktop\\\\Pomodoro_CanvasApp\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { FC, memo, useState, useReducer, useRef, useEffect } from \"react\";\nimport './App.css';\nimport Timer from \"./Timer\";\nimport Settings from \"./Settings\";\nimport SettingsContext from \"./SettingsContext\";\nimport { createSmartappDebugger, createAssistant, AssistantAppState } from \"@sberdevices/assistant-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initAssistant = getState => {\n  if (process.env.NODE_ENV === \"development\") {\n    var _process$env$REACT_AP;\n    return createSmartappDebugger({\n      token: (_process$env$REACT_AP = process.env.REACT_APP_TOKEN) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"\",\n      initPhrase: `Открой Помодоро`,\n      getState\n    });\n  }\n  return createAssistant({\n    getState\n  });\n};\nconst timePeriod = [{\n  MinStr: \"пять\",\n  MinNum: \"5\"\n}, {\n  MinStr: \"десять\",\n  MinNum: \"10\"\n}, {\n  MinStr: \"пятнадцать\",\n  MinNum: \"15\"\n}, {\n  MinStr: \"двадцать\",\n  MinNum: \"20\"\n}, {\n  MinStr: \"двадцать пять\",\n  MinNum: \"25\"\n}, {\n  MinStr: \"тридцать\",\n  MinNum: \"30\"\n}, {\n  MinStr: \"тридцать пять\",\n  MinNum: \"35\"\n}, {\n  MinStr: \"сорок\",\n  MinNum: \"40\"\n}, {\n  MinStr: \"сорок пять\",\n  MinNum: \"45\"\n}];\nfunction whatTime(responseActionStr) {\n  let requestedTime = 15;\n  for (let i = 0; i < timePeriod.length; i++) {\n    if (timePeriod[i].MinStr === responseActionStr.indexOf(timePeriod[i].MinStr) || timePeriod[i].MinNum === responseActionStr.indexOf(timePeriod[i].MinNum)) {\n      requestedTime = parseInt(timePeriod[i].MinNum);\n    }\n  }\n  if (requestedTime !== undefined) {\n    return requestedTime;\n  }\n}\nfunction App() {\n  _s();\n  const [showSettings, setShowSettings] = useState(false);\n  const [workMinutes, setWorkMinutes] = useState(45);\n  const [breakMinutes, setBreakMinutes] = useState(15);\n  const [appState, dispatch] = useReducer();\n  const assistantRef = useRef();\n  const assistant = useRef(typeof createAssistant);\n  var state = {\n    minutes: []\n  };\n  const getStateForAssistant = () => {\n    console.log(\"getStateForAssistant: this.state:\", state);\n    const state_ = {\n      item_selector: {\n        items: state.minutes.map((_ref, index) => {\n          let {\n            id,\n            title\n          } = _ref;\n          return {\n            number: index + 1,\n            id,\n            title\n          };\n        })\n      }\n    };\n    console.log(\"getStateForAssistant: state:\", state);\n    return state_;\n  };\n  useEffect(() => {\n    assistant.current = initAssistant(() => getStateForAssistant());\n    assistant.current.on(\"start\", event => {\n      console.log(`assistant.on(start)`, event);\n    });\n    assistant.current.on(\"data\", (event /*: any*/) => {\n      if (event.type == \"smart_app_data\") {\n        console.log(event);\n        if (event.sub != undefined) {\n          console.log(\"Sub\", event.sub);\n        } else if (event.user_id != undefined) {\n          console.log(\"UserId\", event.user_id);\n        }\n      }\n      console.log(`assistant.on(data)`, event);\n      const {\n        action\n      } = event;\n      dispatchAssistantAction(action);\n    });\n  }, []);\n  const dispatchAssistantAction = async action => {\n    console.log(\"dispatchAssistantAction\", action);\n    if (action) {\n      let workTime = 45;\n      let breakTime = 15;\n      console.log(action.minutes);\n      switch (action.type) {\n        case \"timerUp\":\n          console.log(\"timerUp\");\n          document.getElementById(\"playBtn\").click();\n          break;\n        case \"timerDown\":\n          console.log(\"timerDown\");\n          document.getElementById(\"pauseBtn\").click();\n          break;\n        case \"openSettings\":\n          console.log(\"openSettings\");\n          setShowSettings(true);\n          break;\n        case \"closeSettings\":\n          console.log(\"closeSettings\");\n          setShowSettings(false);\n          break;\n        case \"setSessionTime\":\n          workTime = whatTime(action.minutes);\n          console.log(\"setSessionTime\");\n          setWorkMinutes(workTime);\n          break;\n        default:\n          break;\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(SettingsContext.Provider, {\n      value: {\n        showSettings,\n        setShowSettings,\n        workMinutes,\n        breakMinutes,\n        setWorkMinutes,\n        setBreakMinutes\n      },\n      children: showSettings ? /*#__PURE__*/_jsxDEV(Settings, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Timer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 40\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"N4vT/+2+bYzB3yK14oRPsFC7KM4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","FC","memo","useState","useReducer","useRef","useEffect","Timer","Settings","SettingsContext","createSmartappDebugger","createAssistant","AssistantAppState","initAssistant","getState","process","env","NODE_ENV","token","REACT_APP_TOKEN","initPhrase","timePeriod","MinStr","MinNum","whatTime","responseActionStr","requestedTime","i","length","indexOf","parseInt","undefined","App","showSettings","setShowSettings","workMinutes","setWorkMinutes","breakMinutes","setBreakMinutes","appState","dispatch","assistantRef","assistant","state","minutes","getStateForAssistant","console","log","state_","item_selector","items","map","index","id","title","number","current","on","event","type","sub","user_id","action","dispatchAssistantAction","workTime","breakTime","document","getElementById","click"],"sources":["C:/Users/khalo/Desktop/Pomodoro_CanvasApp/src/App.js"],"sourcesContent":["import React, {\n  FC,\n  memo,\n  useState,\n  useReducer,\n  useRef,\n  useEffect\n} from \"react\";\nimport './App.css';\nimport Timer from \"./Timer\";\nimport Settings from \"./Settings\";\nimport SettingsContext from \"./SettingsContext\";\n\nimport {\n  createSmartappDebugger,\n  createAssistant,\n  AssistantAppState, \n} from \"@sberdevices/assistant-client\";\n\n\nconst initAssistant = (getState) => {\n  if (process.env.NODE_ENV === \"development\") {\n    return createSmartappDebugger({\n      token: process.env.REACT_APP_TOKEN ?? \"\",\n      initPhrase: `Открой Помодоро`,\n      getState\n    });\n  }\n  return createAssistant({ getState });\n};\n\nconst timePeriod = [\n  {MinStr: \"пять\", MinNum: \"5\"},\n  {MinStr: \"десять\", MinNum: \"10\"},\n  {MinStr: \"пятнадцать\", MinNum: \"15\"},\n  {MinStr: \"двадцать\", MinNum: \"20\"},\n  {MinStr: \"двадцать пять\", MinNum: \"25\"},\n  {MinStr: \"тридцать\", MinNum: \"30\"},\n  {MinStr: \"тридцать пять\", MinNum: \"35\"},\n  {MinStr: \"сорок\", MinNum: \"40\"},\n  {MinStr: \"сорок пять\", MinNum: \"45\"},\n]\n\nfunction whatTime(responseActionStr) {\n  let requestedTime=15;\n\n  for(let i = 0; i < timePeriod.length; i++){\n    if(timePeriod[i].MinStr === responseActionStr.indexOf(timePeriod[i].MinStr) || timePeriod[i].MinNum === responseActionStr.indexOf(timePeriod[i].MinNum)) {\n      requestedTime = parseInt(timePeriod[i].MinNum);\n    }\n  }\n  if(requestedTime !== undefined) {return requestedTime;}\n}\n\nfunction App() {\n  const [showSettings, setShowSettings] = useState(false);\n  const [workMinutes, setWorkMinutes] = useState(45);\n  const [breakMinutes, setBreakMinutes] = useState(15);\n  const [appState, dispatch] = useReducer();\n\n  const assistantRef = useRef(); \n  const assistant = useRef(typeof createAssistant);\n\n  var state = {\n    minutes: [],\n    };\n\n    const getStateForAssistant = () => {\n      console.log(\"getStateForAssistant: this.state:\", state);\n      const state_ = {\n      item_selector: {\n      items: state.minutes.map(({ id, title }, index) => ({\n      number: index + 1,\n      id,\n      title,\n      })),\n      },\n      };\n      console.log(\"getStateForAssistant: state:\", state);\n      return state_;\n    };\n\n    useEffect(() => {\n      assistant.current = initAssistant(() => getStateForAssistant());\n      assistant.current.on(\"start\", (event) => {\n      console.log(`assistant.on(start)`, event);\n      });\n      assistant.current.on(\"data\", (event /*: any*/) => {\n        if (event.type == \"smart_app_data\") {\n          console.log(event);\n          if (event.sub != undefined) {\n            console.log(\"Sub\", event.sub);\n            \n          } else if (event.user_id != undefined) {\n            console.log(\"UserId\", event.user_id);\n          }\n        }\n        console.log(`assistant.on(data)`, event);\n        const { action } = event;\n\n        dispatchAssistantAction(action);\n        \n  });\n    },\n    []);\n\n\n    const dispatchAssistantAction = async (action) => {\n      console.log(\"dispatchAssistantAction\", action);\n      if (action) {\n        let workTime = 45;\n        let breakTime = 15;\n        console.log(action.minutes);\n        switch (action.type) {\n          case \"timerUp\":\n            console.log(\"timerUp\")\n            document.getElementById(\"playBtn\").click();\n            break;\n          case \"timerDown\":\n            console.log(\"timerDown\")\n            document.getElementById(\"pauseBtn\").click();\n            break;\n          case \"openSettings\":\n            console.log(\"openSettings\")\n            setShowSettings(true);\n            break;\n          case \"closeSettings\":\n            console.log(\"closeSettings\")\n            setShowSettings(false);\n            break;\n          case \"setSessionTime\":\n            workTime = whatTime(action.minutes);\n            console.log(\"setSessionTime\")\n            setWorkMinutes(workTime);\n            break;\n          default:\n            break;\n          }\n        }\n      };\n\n  return (\n    <main>\n      <SettingsContext.Provider value={{\n        showSettings,\n        setShowSettings,\n        workMinutes,\n        breakMinutes,\n        setWorkMinutes,\n        setBreakMinutes,\n      }}>\n        {showSettings ? <Settings /> : <Timer />}\n      </SettingsContext.Provider>\n    </main>\n  );\n}\n\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}