{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khalo\\\\Desktop\\\\Pomodoro_CanvasApp\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { FC, memo, useState, useReducer, useRef, useEffect } from \"react\";\nimport './App.css';\nimport Timer from \"./Timer\";\nimport Settings from \"./Settings\";\nimport SettingsContext from \"./SettingsContext\";\nimport { createSmartappDebugger, createAssistant, AssistantAppState } from \"@sberdevices/assistant-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initAssistant = getState => {\n  if (process.env.NODE_ENV === \"development\") {\n    var _process$env$REACT_AP;\n    return createSmartappDebugger({\n      token: (_process$env$REACT_AP = process.env.REACT_APP_TOKEN) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"\",\n      initPhrase: `Открой Помодоро`,\n      getState\n    });\n  }\n  return createAssistant({\n    getState\n  });\n};\nfunction App() {\n  _s();\n  const [showSettings, setShowSettings] = useState(false);\n  const [workMinutes, setWorkMinutes] = useState(45);\n  const [breakMinutes, setBreakMinutes] = useState(15);\n  const [appState, dispatch] = useReducer();\n  const assistantRef = useRef();\n  const assistant = useRef(typeof createAssistant);\n  var state = {\n    minutes: []\n  };\n  const getStateForAssistant = () => {\n    console.log(\"getStateForAssistant: this.state:\", state);\n    const state_ = {\n      item_selector: {\n        items: state.minutes.map((_ref, index) => {\n          let {\n            id,\n            title\n          } = _ref;\n          return {\n            number: index + 1,\n            id,\n            title\n          };\n        })\n      }\n    };\n    console.log(\"getStateForAssistant: state:\", state);\n    return state_;\n  };\n  useEffect(() => {\n    assistant.current = initAssistant(() => getStateForAssistant());\n    assistant.current.on(\"start\", event => {\n      console.log(`assistant.on(start)`, event);\n    });\n    assistant.current.on(\"data\", (event /*: any*/) => {\n      if (event.type == \"smart_app_data\") {\n        console.log(event);\n        if (event.sub != undefined) {\n          console.log(\"Sub\", event.sub);\n        } else if (event.user_id != undefined) {\n          console.log(\"UserId\", event.user_id);\n        }\n      }\n      console.log(`assistant.on(data)`, event);\n      const {\n        action\n      } = event;\n      dispatchAssistantAction(action);\n    });\n  }, []);\n  const dispatchAssistantAction = async action => {\n    console.log(\"dispatchAssistantAction\", action);\n    if (action) {\n      console.log(action[1]);\n      switch (action.type) {\n        case \"timerUp\":\n          console.log(\"timerUp\");\n          document.getElementById(\"playBtn\").click();\n          break;\n        case \"timerDown\":\n          console.log(\"timerDown\");\n          document.getElementById(\"pauseBtn\").click();\n          break;\n        case \"openSettings\":\n          console.log(\"openSettings\");\n          setShowSettings(true);\n          break;\n        case \"closeSettings\":\n          console.log(\"closeSettings\");\n          setShowSettings(false);\n          break;\n        case \"setSessionTime\":\n          console.log(\"setSessionTime\");\n          setWorkMinutes(+action[1]);\n          break;\n        default:\n          break;\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(SettingsContext.Provider, {\n      value: {\n        showSettings,\n        setShowSettings,\n        workMinutes,\n        breakMinutes,\n        setWorkMinutes,\n        setBreakMinutes\n      },\n      children: showSettings ? /*#__PURE__*/_jsxDEV(Settings, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Timer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 40\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"N4vT/+2+bYzB3yK14oRPsFC7KM4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","FC","memo","useState","useReducer","useRef","useEffect","Timer","Settings","SettingsContext","createSmartappDebugger","createAssistant","AssistantAppState","initAssistant","getState","process","env","NODE_ENV","token","REACT_APP_TOKEN","initPhrase","App","showSettings","setShowSettings","workMinutes","setWorkMinutes","breakMinutes","setBreakMinutes","appState","dispatch","assistantRef","assistant","state","minutes","getStateForAssistant","console","log","state_","item_selector","items","map","index","id","title","number","current","on","event","type","sub","undefined","user_id","action","dispatchAssistantAction","document","getElementById","click"],"sources":["C:/Users/khalo/Desktop/Pomodoro_CanvasApp/src/App.js"],"sourcesContent":["import React, {\n  FC,\n  memo,\n  useState,\n  useReducer,\n  useRef,\n  useEffect\n} from \"react\";\nimport './App.css';\nimport Timer from \"./Timer\";\nimport Settings from \"./Settings\";\nimport SettingsContext from \"./SettingsContext\";\n\nimport {\n  createSmartappDebugger,\n  createAssistant,\n  AssistantAppState, \n} from \"@sberdevices/assistant-client\";\n\n\nconst initAssistant = (getState) => {\n  if (process.env.NODE_ENV === \"development\") {\n    return createSmartappDebugger({\n      token: process.env.REACT_APP_TOKEN ?? \"\",\n      initPhrase: `Открой Помодоро`,\n      getState\n    });\n  }\n  return createAssistant({ getState });\n};\n\n\nfunction App() {\n  const [showSettings, setShowSettings] = useState(false);\n  const [workMinutes, setWorkMinutes] = useState(45);\n  const [breakMinutes, setBreakMinutes] = useState(15);\n  const [appState, dispatch] = useReducer();\n\n  const assistantRef = useRef(); \n  const assistant = useRef(typeof createAssistant);\n\n  var state = {\n    minutes: [],\n    };\n\n    const getStateForAssistant = () => {\n      console.log(\"getStateForAssistant: this.state:\", state);\n      const state_ = {\n      item_selector: {\n      items: state.minutes.map(({ id, title }, index) => ({\n      number: index + 1,\n      id,\n      title,\n      })),\n      },\n      };\n      console.log(\"getStateForAssistant: state:\", state);\n      return state_;\n    };\n\n    useEffect(() => {\n      assistant.current = initAssistant(() => getStateForAssistant());\n      assistant.current.on(\"start\", (event) => {\n      console.log(`assistant.on(start)`, event);\n      });\n      assistant.current.on(\"data\", (event /*: any*/) => {\n        if (event.type == \"smart_app_data\") {\n          console.log(event);\n          if (event.sub != undefined) {\n            console.log(\"Sub\", event.sub);\n            \n          } else if (event.user_id != undefined) {\n            console.log(\"UserId\", event.user_id);\n          }\n        }\n        console.log(`assistant.on(data)`, event);\n        const { action } = event;\n\n        dispatchAssistantAction(action);\n        \n  });\n    },\n    []);\n\n\n    const dispatchAssistantAction = async (action) => {\n      console.log(\"dispatchAssistantAction\", action);\n      if (action) {\n        console.log(action[1]);\n        switch (action.type) {\n          case \"timerUp\":\n            console.log(\"timerUp\")\n            document.getElementById(\"playBtn\").click();\n            break;\n          case \"timerDown\":\n            console.log(\"timerDown\")\n            document.getElementById(\"pauseBtn\").click();\n            break;\n          case \"openSettings\":\n            console.log(\"openSettings\")\n            setShowSettings(true);\n            break;\n          case \"closeSettings\":\n            console.log(\"closeSettings\")\n            setShowSettings(false);\n            break;\n          case \"setSessionTime\":\n            console.log(\"setSessionTime\")\n            setWorkMinutes(+action[1]);\n            break;\n          default:\n            break;\n          }\n        }\n      };\n\n  return (\n    <main>\n      <SettingsContext.Provider value={{\n        showSettings,\n        setShowSettings,\n        workMinutes,\n        breakMinutes,\n        setWorkMinutes,\n        setBreakMinutes,\n      }}>\n        {showSettings ? <Settings /> : <Timer />}\n      </SettingsContext.Provider>\n    </main>\n  );\n}\n\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IACVC,EAAE,EACFC,IAAI,EACJC,QAAQ,EACRC,UAAU,EACVC,MAAM,EACNC,SAAS,QACJ,OAAO;AACd,OAAO,WAAW;AAClB,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,eAAe,MAAM,mBAAmB;AAE/C,SACEC,sBAAsB,EACtBC,eAAe,EACfC,iBAAiB,QACZ,+BAA+B;AAAC;AAGvC,MAAMC,aAAa,GAAIC,QAAQ,IAAK;EAClC,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IAAA;IAC1C,OAAOP,sBAAsB,CAAC;MAC5BQ,KAAK,2BAAEH,OAAO,CAACC,GAAG,CAACG,eAAe,yEAAI,EAAE;MACxCC,UAAU,EAAG,iBAAgB;MAC7BN;IACF,CAAC,CAAC;EACJ;EACA,OAAOH,eAAe,CAAC;IAAEG;EAAS,CAAC,CAAC;AACtC,CAAC;AAGD,SAASO,GAAG,GAAG;EAAA;EACb,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACuB,YAAY,EAAEC,eAAe,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACyB,QAAQ,EAAEC,QAAQ,CAAC,GAAGzB,UAAU,EAAE;EAEzC,MAAM0B,YAAY,GAAGzB,MAAM,EAAE;EAC7B,MAAM0B,SAAS,GAAG1B,MAAM,CAAC,OAAOM,eAAe,CAAC;EAEhD,IAAIqB,KAAK,GAAG;IACVC,OAAO,EAAE;EACT,CAAC;EAED,MAAMC,oBAAoB,GAAG,MAAM;IACjCC,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEJ,KAAK,CAAC;IACvD,MAAMK,MAAM,GAAG;MACfC,aAAa,EAAE;QACfC,KAAK,EAAEP,KAAK,CAACC,OAAO,CAACO,GAAG,CAAC,OAAgBC,KAAK;UAAA,IAApB;YAAEC,EAAE;YAAEC;UAAM,CAAC;UAAA,OAAa;YACpDC,MAAM,EAAEH,KAAK,GAAG,CAAC;YACjBC,EAAE;YACFC;UACA,CAAC;QAAA,CAAC;MACF;IACA,CAAC;IACDR,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEJ,KAAK,CAAC;IAClD,OAAOK,MAAM;EACf,CAAC;EAED/B,SAAS,CAAC,MAAM;IACdyB,SAAS,CAACc,OAAO,GAAGhC,aAAa,CAAC,MAAMqB,oBAAoB,EAAE,CAAC;IAC/DH,SAAS,CAACc,OAAO,CAACC,EAAE,CAAC,OAAO,EAAGC,KAAK,IAAK;MACzCZ,OAAO,CAACC,GAAG,CAAE,qBAAoB,EAAEW,KAAK,CAAC;IACzC,CAAC,CAAC;IACFhB,SAAS,CAACc,OAAO,CAACC,EAAE,CAAC,MAAM,EAAE,CAACC,KAAK,CAAC,cAAc;MAChD,IAAIA,KAAK,CAACC,IAAI,IAAI,gBAAgB,EAAE;QAClCb,OAAO,CAACC,GAAG,CAACW,KAAK,CAAC;QAClB,IAAIA,KAAK,CAACE,GAAG,IAAIC,SAAS,EAAE;UAC1Bf,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEW,KAAK,CAACE,GAAG,CAAC;QAE/B,CAAC,MAAM,IAAIF,KAAK,CAACI,OAAO,IAAID,SAAS,EAAE;UACrCf,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEW,KAAK,CAACI,OAAO,CAAC;QACtC;MACF;MACAhB,OAAO,CAACC,GAAG,CAAE,oBAAmB,EAAEW,KAAK,CAAC;MACxC,MAAM;QAAEK;MAAO,CAAC,GAAGL,KAAK;MAExBM,uBAAuB,CAACD,MAAM,CAAC;IAErC,CAAC,CAAC;EACA,CAAC,EACD,EAAE,CAAC;EAGH,MAAMC,uBAAuB,GAAG,MAAOD,MAAM,IAAK;IAChDjB,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEgB,MAAM,CAAC;IAC9C,IAAIA,MAAM,EAAE;MACVjB,OAAO,CAACC,GAAG,CAACgB,MAAM,CAAC,CAAC,CAAC,CAAC;MACtB,QAAQA,MAAM,CAACJ,IAAI;QACjB,KAAK,SAAS;UACZb,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;UACtBkB,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,KAAK,EAAE;UAC1C;QACF,KAAK,WAAW;UACdrB,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;UACxBkB,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAACC,KAAK,EAAE;UAC3C;QACF,KAAK,cAAc;UACjBrB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;UAC3Bb,eAAe,CAAC,IAAI,CAAC;UACrB;QACF,KAAK,eAAe;UAClBY,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;UAC5Bb,eAAe,CAAC,KAAK,CAAC;UACtB;QACF,KAAK,gBAAgB;UACnBY,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;UAC7BX,cAAc,CAAC,CAAC2B,MAAM,CAAC,CAAC,CAAC,CAAC;UAC1B;QACF;UACE;MAAM;IAEV;EACF,CAAC;EAEL,oBACE;IAAA,uBACE,QAAC,eAAe,CAAC,QAAQ;MAAC,KAAK,EAAE;QAC/B9B,YAAY;QACZC,eAAe;QACfC,WAAW;QACXE,YAAY;QACZD,cAAc;QACdE;MACF,CAAE;MAAA,UACCL,YAAY,gBAAG,QAAC,QAAQ;QAAA;QAAA;QAAA;MAAA,QAAG,gBAAG,QAAC,KAAK;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA;EACf;IAAA;IAAA;IAAA;EAAA,QACtB;AAEX;AAAC,GAlGQD,GAAG;AAAA,KAAHA,GAAG;AAqGZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}