{"ast":null,"code":"import { c as createNanoEvents, _ as __spreadArrays, a as __rest, b as __assign, p as proto } from './typings-4aa98dc6.js';\n\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n  return getRandomValues(rnds8);\n}\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n  return buf || bytesToUuid(rnds);\n}\nvar createNanoObservable = function (observerFunc) {\n  var _a = createNanoEvents(),\n    on = _a.on,\n    emit = _a.emit;\n  var subscribe = function (_a) {\n    var next = _a.next;\n    var unsubscribe = on('next', next);\n    return {\n      unsubscribe: unsubscribe\n    };\n  };\n  observerFunc({\n    next: function (data) {\n      emit('next', data);\n    }\n  });\n  return {\n    subscribe: subscribe\n  };\n};\nvar findCommandIndex = function (arr, command) {\n  var _a, _b;\n  var index = -1;\n  if (command.type === 'character') {\n    index = arr.findIndex(function (c) {\n      return c.type === 'character' && c.character.id === command.character.id;\n    });\n  } else if (command.type === 'insets') {\n    index = arr.findIndex(function (c) {\n      return c.type === 'insets';\n    });\n  } else if (command.type === 'app_context') {\n    index = arr.findIndex(function (c) {\n      return c.type === 'app_context';\n    });\n  } else if (command.sdk_meta && ((_a = command.sdk_meta) === null || _a === void 0 ? void 0 : _a.mid) && ((_b = command.sdk_meta) === null || _b === void 0 ? void 0 : _b.mid) !== '-1') {\n    index = arr.findIndex(function (c) {\n      var _a, _b;\n      return ((_a = c.sdk_meta) === null || _a === void 0 ? void 0 : _a.mid) === ((_b = command.sdk_meta) === null || _b === void 0 ? void 0 : _b.mid);\n    });\n  }\n  return index;\n};\nvar appInitialData = function () {\n  var isPulled = false;\n  var pulled = [];\n  var committed = [];\n  var diff = [];\n  var isCommandWasPulled = function (command) {\n    return findCommandIndex(pulled, command) >= 0;\n  };\n  return {\n    /**\n     * Прочитать appInitialData\n     * @returns Массив комманд\n     */\n    pull: function () {\n      isPulled = true;\n      pulled = __spreadArrays(window.appInitialData || []);\n      return __spreadArrays(pulled);\n    },\n    /**\n     * Зафиксировать текущее состояние appInitialData\n     */\n    commit: function () {\n      committed = __spreadArrays(window.appInitialData || []);\n      diff = isPulled === true ? (window.appInitialData || []).filter(function (c) {\n        return !isCommandWasPulled(c);\n      }) : __spreadArrays(window.appInitialData || []);\n    },\n    /**\n     * Возвращает диф appInitialData между pull и commit\n     * @returns Массив комманд\n     */\n    diff: function () {\n      return __spreadArrays(diff);\n    },\n    /**\n     * Возвращает флаг наличия command в appInitialData на момент commit\n     * @param command Команда, которую нужно проверить на наличие в appInitialData\n     * @returns true - если команда была в appInitialData\n     */\n    isCommitted: function (command) {\n      var commandIndex = findCommandIndex(committed, command);\n      var isCommitted = commandIndex >= 0;\n      if (isCommitted) {\n        committed.splice(commandIndex, 1);\n      }\n      return isCommitted;\n    },\n    /**\n     * Возвращает первое сообщение из appInitialData, подходящее под фильтры param\n     * @param param Параметры: тип сообщения (например, smart_app_data)\n     * и тип команды (значение поля smart_app_data.type)\n     * @returns Первое сообщение, соответствующее параметрам или undefined\n     */\n    find: function (_a) {\n      var type = _a.type,\n        command = _a.command;\n      var data = __spreadArrays(window.appInitialData || []);\n      var result = data.find(function (data) {\n        if (!command && type && type === data.type) {\n          return true;\n        }\n        var isCommandInSmartAppData = command && 'smart_app_data' in data;\n        if (!isCommandInSmartAppData) {\n          return;\n        }\n        if (command === data.smart_app_data.command || command === data.smart_app_data.type) {\n          return true;\n        }\n        return false;\n      });\n      return result && 'smart_app_data' in result ? result.smart_app_data : result;\n    }\n  };\n}();\nvar excludeTags = ['A', 'AUDIO', 'BUTTON', 'INPUT', 'OPTION', 'SELECT', 'TEXTAREA', 'VIDEO'];\nfunction inIframe() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}\nif (typeof window !== 'undefined' && inIframe()) {\n  var postMessage_1 = function (action) {\n    var _a;\n    (_a = window.top) === null || _a === void 0 ? void 0 : _a.postMessage(JSON.stringify(action), '*');\n  };\n  var historyBack_1 = function () {\n    var prevPage = window.location.href;\n    window.history.back();\n    setTimeout(function () {\n      // закрываем страницу, если переход назад не поменял урл\n      if (window.location.href === prevPage) {\n        postMessage_1({\n          type: 'close'\n        });\n      }\n    }, 500);\n  };\n  window.appInitialData = [];\n  window.AssistantHost = {\n    sendDataContainer: function (json) {\n      postMessage_1({\n        type: 'sendDataContainer',\n        payload: json\n      });\n    },\n    close: function () {\n      postMessage_1({\n        type: 'close'\n      });\n    },\n    sendData: function (json) {\n      postMessage_1({\n        type: 'sendData',\n        payload: json\n      });\n    },\n    setSuggests: function (suggests) {\n      postMessage_1({\n        type: 'setSuggests',\n        payload: suggests\n      });\n    },\n    setHints: function (hints) {\n      postMessage_1({\n        type: 'setHints',\n        payload: hints\n      });\n    },\n    ready: function () {\n      postMessage_1({\n        type: 'ready'\n      });\n    },\n    sendText: function (message) {\n      postMessage_1({\n        type: 'sendText',\n        payload: message\n      });\n    }\n  };\n  window.addEventListener('message', function (e) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    try {\n      if (typeof e.data === 'string') {\n        var data = JSON.parse(e.data);\n        switch (data.type) {\n          case 'onBack':\n            historyBack_1();\n            break;\n          case 'onData':\n            (_b = (_a = window.AssistantClient) === null || _a === void 0 ? void 0 : _a.onData) === null || _b === void 0 ? void 0 : _b.call(_a, data.payload);\n            break;\n          case 'onRequestState':\n            {\n              var state = (_d = (_c = window.AssistantClient) === null || _c === void 0 ? void 0 : _c.onRequestState) === null || _d === void 0 ? void 0 : _d.call(_c);\n              postMessage_1({\n                type: 'state',\n                payload: state,\n                requestId: data.requestId\n              });\n              break;\n            }\n          case 'onRequestRecoveryState':\n            {\n              var recoverystate = (_f = (_e = window.AssistantClient) === null || _e === void 0 ? void 0 : _e.onRequestRecoveryState) === null || _f === void 0 ? void 0 : _f.call(_e);\n              postMessage_1({\n                type: 'recoveryState',\n                payload: recoverystate\n              });\n              break;\n            }\n          case 'onStart':\n            (_h = (_g = window.AssistantClient) === null || _g === void 0 ? void 0 : _g.onStart) === null || _h === void 0 ? void 0 : _h.call(_g);\n            break;\n          default:\n            // eslint-disable-next-line no-console\n            console.error(e, 'Unknown parsed message');\n            break;\n        }\n      }\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err, 'Unknown message');\n    }\n  });\n  window.addEventListener('keydown', function (_a) {\n    var _b, _c;\n    var code = _a.code;\n    switch (code) {\n      case 'Enter':\n        if (document.activeElement && !excludeTags.includes(document.activeElement.tagName)) {\n          (_c = (_b = document.activeElement).click) === null || _c === void 0 ? void 0 : _c.call(_b);\n        }\n        break;\n      case 'Escape':\n        historyBack_1();\n        break;\n    }\n  });\n}\nvar createAssistant = function (_a) {\n  var _b;\n  var getState = _a.getState,\n    getRecoveryState = _a.getRecoveryState,\n    _c = _a.ready,\n    ready = _c === void 0 ? true : _c;\n  var currentGetState = getState;\n  var currentGetRecoveryState = getRecoveryState;\n  var isInitialCommandsEmitted = false;\n  var _d = createNanoEvents(),\n    on = _d.on,\n    emit = _d.emit;\n  var observables = new Map();\n  var emitCommand = function (command) {\n    if (command.type === 'smart_app_data') {\n      emit('command', command.smart_app_data);\n    }\n    if (command.type === 'smart_app_error') {\n      emit('error', command.smart_app_error);\n    }\n    return emit('data', command);\n  };\n  var cancelTts = typeof ((_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.cancelTts) !== 'undefined' ? function () {\n    var _a, _b;\n    (_b = (_a = window.AssistantHost).cancelTts) === null || _b === void 0 ? void 0 : _b.call(_a, '');\n  } : undefined;\n  var emitAppInitialData = function () {\n    if (!isInitialCommandsEmitted) {\n      appInitialData.diff().forEach(function (c) {\n        return emitCommand(c);\n      });\n      isInitialCommandsEmitted = true;\n    }\n  };\n  window.AssistantClient = {\n    onData: function (command) {\n      var _a, _b, _c;\n      if (appInitialData.isCommitted(command)) {\n        return;\n      }\n      /// фильтр команды 'назад'\n      /// может приходить type='system', но в типах это не отражаем\n      // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n      // @ts-ignore\n      if (command.type === 'system' && ((_b = (_a = command.system) === null || _a === void 0 ? void 0 : _a.command) === null || _b === void 0 ? void 0 : _b.toUpperCase()) === 'BACK') {\n        return;\n      }\n      if ((command.type === 'smart_app_data' || command.type === 'smart_app_error') && ((_c = command.sdk_meta) === null || _c === void 0 ? void 0 : _c.requestId) && observables.has(command.sdk_meta.requestId)) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var _d = command.sdk_meta,\n          realReqId = _d.requestId,\n          meta = __rest(_d, [\"requestId\"]);\n        var _e = observables.get(command.sdk_meta.requestId) || {},\n          requestId = _e.requestId,\n          next = _e.next;\n        if (Object.keys(meta).length > 0 || requestId) {\n          // eslint-disable-next-line @typescript-eslint/camelcase\n          command.sdk_meta = __assign({}, meta);\n          if (requestId) {\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            command.sdk_meta = {\n              requestId: requestId\n            };\n          }\n        }\n        if (next) {\n          next(command.type === 'smart_app_data' ? command : command);\n        }\n        return;\n      }\n      emitCommand(command);\n    },\n    onRequestState: function () {\n      return currentGetState();\n    },\n    onRequestRecoveryState: function () {\n      if (currentGetRecoveryState) {\n        return currentGetRecoveryState();\n      }\n      return undefined;\n    },\n    onStart: function () {\n      emit('start');\n      emitAppInitialData();\n    }\n  };\n  var readyFn = function () {\n    var _a;\n    appInitialData.commit();\n    (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.ready();\n  };\n  if (ready) {\n    setTimeout(readyFn); // таймаут для подписки на start\n  }\n\n  var sendData = function (_a, onData) {\n    var _b, _c, _d;\n    var action = _a.action,\n      name = _a.name,\n      requestId = _a.requestId;\n    if ((_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.sendDataContainer) {\n      if (onData == null) {\n        (_c = window.AssistantHost) === null || _c === void 0 ? void 0 : _c.sendDataContainer( /* eslint-disable-next-line @typescript-eslint/camelcase */\n        JSON.stringify({\n          data: action,\n          message_name: name || '',\n          requestId: requestId\n        }));\n        return function () {};\n      }\n      if (requestId && observables.has(requestId)) {\n        throw new Error('requestId должен быть уникальным');\n      }\n      var realRequestId_1 = requestId || v4();\n      var subscribe = createNanoObservable(function (_a) {\n        var _b;\n        var next = _a.next;\n        (_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.sendDataContainer( /* eslint-disable-next-line @typescript-eslint/camelcase */\n        JSON.stringify({\n          data: action,\n          message_name: name || '',\n          requestId: realRequestId_1\n        }));\n        observables.set(realRequestId_1, {\n          next: next,\n          requestId: requestId\n        });\n      }).subscribe;\n      var unsubscribe_1 = subscribe({\n        next: onData\n      }).unsubscribe;\n      return function () {\n        unsubscribe_1();\n        observables.delete(realRequestId_1);\n      };\n    }\n    if (onData != null) {\n      throw new Error('Не поддерживается в данной версии клиента');\n    }\n    (_d = window.AssistantHost) === null || _d === void 0 ? void 0 : _d.sendData(JSON.stringify(action), name || null);\n    return function () {};\n  };\n  return {\n    cancelTts: cancelTts,\n    close: function () {\n      var _a;\n      return (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.close();\n    },\n    getInitialData: appInitialData.pull,\n    findInInitialData: appInitialData.find,\n    getRecoveryState: function () {\n      return window.appRecoveryState;\n    },\n    on: on,\n    sendAction: function (action, onData, onError, _a) {\n      var _b = _a === void 0 ? {} : _a,\n        name = _b.name,\n        requestId = _b.requestId;\n      return sendData({\n        action: action,\n        name: name,\n        requestId: requestId\n      }, function (data) {\n        if (data.type === 'smart_app_data' && onData) {\n          onData(data.smart_app_data);\n          return;\n        }\n        if (data.type === 'smart_app_error' && onError) {\n          onError(data.smart_app_error);\n          return;\n        }\n        emitCommand(data);\n      });\n    },\n    sendData: sendData,\n    setGetState: function (nextGetState) {\n      currentGetState = nextGetState;\n    },\n    setGetRecoveryState: function (nextGetRecoveryState) {\n      currentGetRecoveryState = nextGetRecoveryState;\n    },\n    setSuggests: function (suggestions) {\n      var _a;\n      (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.setSuggests(JSON.stringify({\n        suggestions: {\n          buttons: suggestions\n        }\n      }));\n    },\n    setHints: function (hints) {\n      var _a;\n      (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.setHints(JSON.stringify({\n        hints: hints\n      }));\n    },\n    sendText: function (message) {\n      var _a;\n      return (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.sendText(message);\n    },\n    ready: readyFn\n  };\n};\nif (typeof window !== 'undefined') {\n  // eslint-disable-next-line no-underscore-dangle\n  window.__ASSISTANT_CLIENT__ = {\n    version: '5.0.2'\n  };\n}\nexport { createAssistant as c, v4 as v };","map":{"version":3,"names":["c","createNanoEvents","_","__spreadArrays","a","__rest","b","__assign","p","proto","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rng","Error","byteToHex","i","toString","substr","bytesToUuid","buf","offset","bth","join","v4","options","Array","rnds","random","ii","createNanoObservable","observerFunc","_a","on","emit","subscribe","next","unsubscribe","data","findCommandIndex","arr","command","_b","index","type","findIndex","character","id","sdk_meta","mid","appInitialData","isPulled","pulled","committed","diff","isCommandWasPulled","pull","window","commit","filter","isCommitted","commandIndex","splice","find","result","isCommandInSmartAppData","smart_app_data","excludeTags","inIframe","self","top","e","postMessage_1","action","postMessage","JSON","stringify","historyBack_1","prevPage","location","href","history","back","setTimeout","AssistantHost","sendDataContainer","json","payload","close","sendData","setSuggests","suggests","setHints","hints","ready","sendText","message","addEventListener","_c","_d","_e","_f","_g","_h","parse","AssistantClient","onData","call","state","onRequestState","requestId","recoverystate","onRequestRecoveryState","onStart","console","error","err","code","document","activeElement","includes","tagName","click","createAssistant","getState","getRecoveryState","currentGetState","currentGetRecoveryState","isInitialCommandsEmitted","observables","Map","emitCommand","smart_app_error","cancelTts","undefined","emitAppInitialData","forEach","system","toUpperCase","has","realReqId","meta","get","Object","keys","length","readyFn","name","message_name","realRequestId_1","set","unsubscribe_1","delete","getInitialData","findInInitialData","appRecoveryState","sendAction","onError","setGetState","nextGetState","setGetRecoveryState","nextGetRecoveryState","suggestions","buttons","__ASSISTANT_CLIENT__","version","v"],"sources":["C:/Users/khalo/Desktop/Pomodoro_CanvasApp/node_modules/@sberdevices/assistant-client/esm/createAssistant-a1923b87.js"],"sourcesContent":["import { c as createNanoEvents, _ as __spreadArrays, a as __rest, b as __assign, p as proto } from './typings-4aa98dc6.js';\n\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nfunction rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nvar createNanoObservable = function (observerFunc) {\n    var _a = createNanoEvents(), on = _a.on, emit = _a.emit;\n    var subscribe = function (_a) {\n        var next = _a.next;\n        var unsubscribe = on('next', next);\n        return { unsubscribe: unsubscribe };\n    };\n    observerFunc({\n        next: function (data) {\n            emit('next', data);\n        },\n    });\n    return {\n        subscribe: subscribe,\n    };\n};\n\nvar findCommandIndex = function (arr, command) {\n    var _a, _b;\n    var index = -1;\n    if (command.type === 'character') {\n        index = arr.findIndex(function (c) { return c.type === 'character' && c.character.id === command.character.id; });\n    }\n    else if (command.type === 'insets') {\n        index = arr.findIndex(function (c) { return c.type === 'insets'; });\n    }\n    else if (command.type === 'app_context') {\n        index = arr.findIndex(function (c) { return c.type === 'app_context'; });\n    }\n    else if (command.sdk_meta && ((_a = command.sdk_meta) === null || _a === void 0 ? void 0 : _a.mid) && ((_b = command.sdk_meta) === null || _b === void 0 ? void 0 : _b.mid) !== '-1') {\n        index = arr.findIndex(function (c) { var _a, _b; return ((_a = c.sdk_meta) === null || _a === void 0 ? void 0 : _a.mid) === ((_b = command.sdk_meta) === null || _b === void 0 ? void 0 : _b.mid); });\n    }\n    return index;\n};\nvar appInitialData = (function () {\n    var isPulled = false;\n    var pulled = [];\n    var committed = [];\n    var diff = [];\n    var isCommandWasPulled = function (command) { return findCommandIndex(pulled, command) >= 0; };\n    return {\n        /**\n         * Прочитать appInitialData\n         * @returns Массив комманд\n         */\n        pull: function () {\n            isPulled = true;\n            pulled = __spreadArrays((window.appInitialData || []));\n            return __spreadArrays(pulled);\n        },\n        /**\n         * Зафиксировать текущее состояние appInitialData\n         */\n        commit: function () {\n            committed = __spreadArrays((window.appInitialData || []));\n            diff =\n                isPulled === true\n                    ? (window.appInitialData || []).filter(function (c) { return !isCommandWasPulled(c); })\n                    : __spreadArrays((window.appInitialData || []));\n        },\n        /**\n         * Возвращает диф appInitialData между pull и commit\n         * @returns Массив комманд\n         */\n        diff: function () {\n            return __spreadArrays(diff);\n        },\n        /**\n         * Возвращает флаг наличия command в appInitialData на момент commit\n         * @param command Команда, которую нужно проверить на наличие в appInitialData\n         * @returns true - если команда была в appInitialData\n         */\n        isCommitted: function (command) {\n            var commandIndex = findCommandIndex(committed, command);\n            var isCommitted = commandIndex >= 0;\n            if (isCommitted) {\n                committed.splice(commandIndex, 1);\n            }\n            return isCommitted;\n        },\n        /**\n         * Возвращает первое сообщение из appInitialData, подходящее под фильтры param\n         * @param param Параметры: тип сообщения (например, smart_app_data)\n         * и тип команды (значение поля smart_app_data.type)\n         * @returns Первое сообщение, соответствующее параметрам или undefined\n         */\n        find: function (_a) {\n            var type = _a.type, command = _a.command;\n            var data = __spreadArrays((window.appInitialData || []));\n            var result = data.find(function (data) {\n                if (!command && type && type === data.type) {\n                    return true;\n                }\n                var isCommandInSmartAppData = command && 'smart_app_data' in data;\n                if (!isCommandInSmartAppData) {\n                    return;\n                }\n                if (command === data.smart_app_data.command ||\n                    command === data.smart_app_data.type) {\n                    return true;\n                }\n                return false;\n            });\n            return (result && 'smart_app_data' in result ? result.smart_app_data : result);\n        },\n    };\n})();\n\nvar excludeTags = ['A', 'AUDIO', 'BUTTON', 'INPUT', 'OPTION', 'SELECT', 'TEXTAREA', 'VIDEO'];\nfunction inIframe() {\n    try {\n        return window.self !== window.top;\n    }\n    catch (e) {\n        return true;\n    }\n}\nif (typeof window !== 'undefined' && inIframe()) {\n    var postMessage_1 = function (action) {\n        var _a;\n        (_a = window.top) === null || _a === void 0 ? void 0 : _a.postMessage(JSON.stringify(action), '*');\n    };\n    var historyBack_1 = function () {\n        var prevPage = window.location.href;\n        window.history.back();\n        setTimeout(function () {\n            // закрываем страницу, если переход назад не поменял урл\n            if (window.location.href === prevPage) {\n                postMessage_1({ type: 'close' });\n            }\n        }, 500);\n    };\n    window.appInitialData = [];\n    window.AssistantHost = {\n        sendDataContainer: function (json) {\n            postMessage_1({ type: 'sendDataContainer', payload: json });\n        },\n        close: function () {\n            postMessage_1({ type: 'close' });\n        },\n        sendData: function (json) {\n            postMessage_1({ type: 'sendData', payload: json });\n        },\n        setSuggests: function (suggests) {\n            postMessage_1({ type: 'setSuggests', payload: suggests });\n        },\n        setHints: function (hints) {\n            postMessage_1({ type: 'setHints', payload: hints });\n        },\n        ready: function () {\n            postMessage_1({ type: 'ready' });\n        },\n        sendText: function (message) {\n            postMessage_1({ type: 'sendText', payload: message });\n        },\n    };\n    window.addEventListener('message', function (e) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        try {\n            if (typeof e.data === 'string') {\n                var data = JSON.parse(e.data);\n                switch (data.type) {\n                    case 'onBack':\n                        historyBack_1();\n                        break;\n                    case 'onData':\n                        (_b = (_a = window.AssistantClient) === null || _a === void 0 ? void 0 : _a.onData) === null || _b === void 0 ? void 0 : _b.call(_a, data.payload);\n                        break;\n                    case 'onRequestState': {\n                        var state = (_d = (_c = window.AssistantClient) === null || _c === void 0 ? void 0 : _c.onRequestState) === null || _d === void 0 ? void 0 : _d.call(_c);\n                        postMessage_1({ type: 'state', payload: state, requestId: data.requestId });\n                        break;\n                    }\n                    case 'onRequestRecoveryState': {\n                        var recoverystate = (_f = (_e = window.AssistantClient) === null || _e === void 0 ? void 0 : _e.onRequestRecoveryState) === null || _f === void 0 ? void 0 : _f.call(_e);\n                        postMessage_1({ type: 'recoveryState', payload: recoverystate });\n                        break;\n                    }\n                    case 'onStart':\n                        (_h = (_g = window.AssistantClient) === null || _g === void 0 ? void 0 : _g.onStart) === null || _h === void 0 ? void 0 : _h.call(_g);\n                        break;\n                    default:\n                        // eslint-disable-next-line no-console\n                        console.error(e, 'Unknown parsed message');\n                        break;\n                }\n            }\n        }\n        catch (err) {\n            // eslint-disable-next-line no-console\n            console.error(err, 'Unknown message');\n        }\n    });\n    window.addEventListener('keydown', function (_a) {\n        var _b, _c;\n        var code = _a.code;\n        switch (code) {\n            case 'Enter':\n                if (document.activeElement && !excludeTags.includes(document.activeElement.tagName)) {\n                    (_c = (_b = document.activeElement).click) === null || _c === void 0 ? void 0 : _c.call(_b);\n                }\n                break;\n            case 'Escape':\n                historyBack_1();\n                break;\n        }\n    });\n}\nvar createAssistant = function (_a) {\n    var _b;\n    var getState = _a.getState, getRecoveryState = _a.getRecoveryState, _c = _a.ready, ready = _c === void 0 ? true : _c;\n    var currentGetState = getState;\n    var currentGetRecoveryState = getRecoveryState;\n    var isInitialCommandsEmitted = false;\n    var _d = createNanoEvents(), on = _d.on, emit = _d.emit;\n    var observables = new Map();\n    var emitCommand = function (command) {\n        if (command.type === 'smart_app_data') {\n            emit('command', command.smart_app_data);\n        }\n        if (command.type === 'smart_app_error') {\n            emit('error', command.smart_app_error);\n        }\n        return emit('data', command);\n    };\n    var cancelTts = typeof ((_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.cancelTts) !== 'undefined'\n        ? function () {\n            var _a, _b;\n            (_b = (_a = window.AssistantHost).cancelTts) === null || _b === void 0 ? void 0 : _b.call(_a, '');\n        }\n        : undefined;\n    var emitAppInitialData = function () {\n        if (!isInitialCommandsEmitted) {\n            appInitialData.diff().forEach(function (c) { return emitCommand(c); });\n            isInitialCommandsEmitted = true;\n        }\n    };\n    window.AssistantClient = {\n        onData: function (command) {\n            var _a, _b, _c;\n            if (appInitialData.isCommitted(command)) {\n                return;\n            }\n            /// фильтр команды 'назад'\n            /// может приходить type='system', но в типах это не отражаем\n            // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\n            // @ts-ignore\n            if (command.type === 'system' && ((_b = (_a = command.system) === null || _a === void 0 ? void 0 : _a.command) === null || _b === void 0 ? void 0 : _b.toUpperCase()) === 'BACK') {\n                return;\n            }\n            if ((command.type === 'smart_app_data' || command.type === 'smart_app_error') && ((_c = command.sdk_meta) === null || _c === void 0 ? void 0 : _c.requestId) &&\n                observables.has(command.sdk_meta.requestId)) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var _d = command.sdk_meta, realReqId = _d.requestId, meta = __rest(_d, [\"requestId\"]);\n                var _e = observables.get(command.sdk_meta.requestId) || {}, requestId = _e.requestId, next = _e.next;\n                if (Object.keys(meta).length > 0 || requestId) {\n                    // eslint-disable-next-line @typescript-eslint/camelcase\n                    command.sdk_meta = __assign({}, meta);\n                    if (requestId) {\n                        // eslint-disable-next-line @typescript-eslint/camelcase\n                        command.sdk_meta = { requestId: requestId };\n                    }\n                }\n                if (next) {\n                    next(command.type === 'smart_app_data' ? command : command);\n                }\n                return;\n            }\n            emitCommand(command);\n        },\n        onRequestState: function () {\n            return currentGetState();\n        },\n        onRequestRecoveryState: function () {\n            if (currentGetRecoveryState) {\n                return currentGetRecoveryState();\n            }\n            return undefined;\n        },\n        onStart: function () {\n            emit('start');\n            emitAppInitialData();\n        },\n    };\n    var readyFn = function () {\n        var _a;\n        appInitialData.commit();\n        (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.ready();\n    };\n    if (ready) {\n        setTimeout(readyFn); // таймаут для подписки на start\n    }\n    var sendData = function (_a, onData) {\n        var _b, _c, _d;\n        var action = _a.action, name = _a.name, requestId = _a.requestId;\n        if ((_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.sendDataContainer) {\n            if (onData == null) {\n                (_c = window.AssistantHost) === null || _c === void 0 ? void 0 : _c.sendDataContainer(\n                /* eslint-disable-next-line @typescript-eslint/camelcase */\n                JSON.stringify({ data: action, message_name: name || '', requestId: requestId }));\n                return function () { };\n            }\n            if (requestId && observables.has(requestId)) {\n                throw new Error('requestId должен быть уникальным');\n            }\n            var realRequestId_1 = requestId || v4();\n            var subscribe = createNanoObservable(function (_a) {\n                var _b;\n                var next = _a.next;\n                (_b = window.AssistantHost) === null || _b === void 0 ? void 0 : _b.sendDataContainer(\n                /* eslint-disable-next-line @typescript-eslint/camelcase */\n                JSON.stringify({ data: action, message_name: name || '', requestId: realRequestId_1 }));\n                observables.set(realRequestId_1, { next: next, requestId: requestId });\n            }).subscribe;\n            var unsubscribe_1 = subscribe({ next: onData }).unsubscribe;\n            return function () {\n                unsubscribe_1();\n                observables.delete(realRequestId_1);\n            };\n        }\n        if (onData != null) {\n            throw new Error('Не поддерживается в данной версии клиента');\n        }\n        (_d = window.AssistantHost) === null || _d === void 0 ? void 0 : _d.sendData(JSON.stringify(action), name || null);\n        return function () { };\n    };\n    return {\n        cancelTts: cancelTts,\n        close: function () { var _a; return (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.close(); },\n        getInitialData: appInitialData.pull,\n        findInInitialData: appInitialData.find,\n        getRecoveryState: function () { return window.appRecoveryState; },\n        on: on,\n        sendAction: function (action, onData, onError, _a) {\n            var _b = _a === void 0 ? {} : _a, name = _b.name, requestId = _b.requestId;\n            return sendData({ action: action, name: name, requestId: requestId }, function (data) {\n                if (data.type === 'smart_app_data' && onData) {\n                    onData(data.smart_app_data);\n                    return;\n                }\n                if (data.type === 'smart_app_error' && onError) {\n                    onError(data.smart_app_error);\n                    return;\n                }\n                emitCommand(data);\n            });\n        },\n        sendData: sendData,\n        setGetState: function (nextGetState) {\n            currentGetState = nextGetState;\n        },\n        setGetRecoveryState: function (nextGetRecoveryState) {\n            currentGetRecoveryState = nextGetRecoveryState;\n        },\n        setSuggests: function (suggestions) {\n            var _a;\n            (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.setSuggests(JSON.stringify({ suggestions: { buttons: suggestions } }));\n        },\n        setHints: function (hints) {\n            var _a;\n            (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.setHints(JSON.stringify({ hints: hints }));\n        },\n        sendText: function (message) { var _a; return (_a = window.AssistantHost) === null || _a === void 0 ? void 0 : _a.sendText(message); },\n        ready: readyFn,\n    };\n};\nif (typeof window !== 'undefined') {\n    // eslint-disable-next-line no-underscore-dangle\n    window.__ASSISTANT_CLIENT__ = { version: '5.0.2' };\n}\n\nexport { createAssistant as c, v4 as v };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}