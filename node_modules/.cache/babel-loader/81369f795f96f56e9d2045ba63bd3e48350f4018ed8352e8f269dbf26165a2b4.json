{"ast":null,"code":"import _slicedToArray from\"C:/Users/khalo/Desktop/Pomodoro_CanvasApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{CircularProgressbar,buildStyles}from'react-circular-progressbar';import'react-circular-progressbar/dist/styles.css';import PlayButton from\"./PlayButton\";import PauseButton from\"./PauseButton\";import SettingsButton from\"./SettingsButton\";import{useContext,useState,useEffect,useRef}from\"react\";import SettingsContext from\"./SettingsContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var red='#f54e4e';var green='#4aec8c';function Timer(){var settingsInfo=useContext(SettingsContext);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isPaused=_useState2[0],setIsPaused=_useState2[1];var _useState3=useState('work'),_useState4=_slicedToArray(_useState3,2),mode=_useState4[0],setMode=_useState4[1];// work/break/null\nvar _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),secondsLeft=_useState6[0],setSecondsLeft=_useState6[1];var secondsLeftRef=useRef(secondsLeft);var isPausedRef=useRef(isPaused);var modeRef=useRef(mode);function tick(){secondsLeftRef.current--;setSecondsLeft(secondsLeftRef.current);}useEffect(function(){function switchMode(){var nextMode=modeRef.current==='work'?'break':'work';var nextSeconds=(nextMode==='work'?settingsInfo.workMinutes:settingsInfo.breakMinutes)*60;setMode(nextMode);modeRef.current=nextMode;setSecondsLeft(nextSeconds);secondsLeftRef.current=nextSeconds;}secondsLeftRef.current=settingsInfo.workMinutes*60;setSecondsLeft(secondsLeftRef.current);var interval=setInterval(function(){if(isPausedRef.current){return;}if(secondsLeftRef.current===0){return switchMode();}tick();},1000);return function(){return clearInterval(interval);};},[settingsInfo]);var totalSeconds=mode==='work'?settingsInfo.workMinutes*60:settingsInfo.breakMinutes*60;var percentage=Math.round(secondsLeft/totalSeconds*100);var minutes=Math.floor(secondsLeft/60);var seconds=secondsLeft%60;if(seconds<10)seconds='0'+seconds;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CircularProgressbar,{value:percentage,text:minutes+':'+seconds,styles:buildStyles({textColor:'#fff',pathColor:mode==='work'?red:green,tailColor:'rgba(255,255,255,.2)'})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px'},children:isPaused?/*#__PURE__*/_jsx(PlayButton,{id:\"playBtn\",onClick:function onClick(){setIsPaused(false);isPausedRef.current=false;}}):/*#__PURE__*/_jsx(PauseButton,{id:\"pauseBtn\",onClick:function onClick(){setIsPaused(true);isPausedRef.current=true;}})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px'},children:/*#__PURE__*/_jsx(SettingsButton,{onClick:function onClick(){return settingsInfo.setShowSettings(true);}})})]});}export default Timer;","map":{"version":3,"names":["CircularProgressbar","buildStyles","PlayButton","PauseButton","SettingsButton","useContext","useState","useEffect","useRef","SettingsContext","red","green","Timer","settingsInfo","isPaused","setIsPaused","mode","setMode","secondsLeft","setSecondsLeft","secondsLeftRef","isPausedRef","modeRef","tick","current","switchMode","nextMode","nextSeconds","workMinutes","breakMinutes","interval","setInterval","clearInterval","totalSeconds","percentage","Math","round","minutes","floor","seconds","textColor","pathColor","tailColor","marginTop","setShowSettings"],"sources":["C:/Users/khalo/Desktop/Pomodoro_CanvasApp/src/Timer.js"],"sourcesContent":["import { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport PlayButton from \"./PlayButton\";\nimport PauseButton from \"./PauseButton\";\nimport SettingsButton from \"./SettingsButton\";\nimport {useContext, useState, useEffect, useRef} from \"react\";\nimport SettingsContext from \"./SettingsContext\";\n\nconst red = '#f54e4e';\nconst green = '#4aec8c';\n\nfunction Timer() {\n  const settingsInfo = useContext(SettingsContext);\n\n  const [isPaused, setIsPaused] = useState(true);\n  const [mode, setMode] = useState('work'); // work/break/null\n  const [secondsLeft, setSecondsLeft] = useState(0);\n\n  const secondsLeftRef = useRef(secondsLeft);\n  const isPausedRef = useRef(isPaused);\n  const modeRef = useRef(mode);\n\n  function tick() {\n    secondsLeftRef.current--;\n    setSecondsLeft(secondsLeftRef.current);\n  }\n\n  useEffect(() => {\n\n    function switchMode() {\n      const nextMode = modeRef.current === 'work' ? 'break' : 'work';\n      const nextSeconds = (nextMode === 'work' ? settingsInfo.workMinutes : settingsInfo.breakMinutes) * 60;\n\n      setMode(nextMode);\n      modeRef.current = nextMode;\n\n      setSecondsLeft(nextSeconds);\n      secondsLeftRef.current = nextSeconds;\n    }\n\n    secondsLeftRef.current = settingsInfo.workMinutes * 60;\n    setSecondsLeft(secondsLeftRef.current);\n\n    const interval = setInterval(() => {\n      if (isPausedRef.current) {\n        return;\n      }\n      if (secondsLeftRef.current === 0) {\n        return switchMode();\n      }\n\n      tick();\n    },1000);\n\n    return () => clearInterval(interval);\n  }, [settingsInfo]);\n\n  const totalSeconds = mode === 'work'\n    ? settingsInfo.workMinutes * 60\n    : settingsInfo.breakMinutes * 60;\n  const percentage = Math.round(secondsLeft / totalSeconds * 100);\n\n  const minutes = Math.floor(secondsLeft / 60);\n  let seconds = secondsLeft % 60;\n  if(seconds < 10) seconds = '0'+seconds;\n\n  return (\n    <div>\n      <CircularProgressbar\n        value={percentage}\n        text={minutes + ':' + seconds}\n        styles={buildStyles({\n        textColor:'#fff',\n        pathColor:mode === 'work' ? red : green,\n        tailColor:'rgba(255,255,255,.2)',\n      })} />\n      <div style={{marginTop:'20px'}}>\n        {isPaused\n          ? <PlayButton id=\"playBtn\" onClick={() => { setIsPaused(false); isPausedRef.current = false; }} />\n          : <PauseButton id=\"pauseBtn\" onClick={() => { setIsPaused(true); isPausedRef.current = true; }} />}\n      </div>\n      <div style={{marginTop:'20px'}}>\n        <SettingsButton onClick={() => settingsInfo.setShowSettings(true)} />\n      </div>\n    </div>\n  );\n}\n\nexport default Timer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}